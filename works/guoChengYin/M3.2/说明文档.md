## 一些文件夹的信息
myapp.py-----是整个flask项目的启动文件，在这里配置了两个路由分别用来处理两个URL请求。
dao----------文件夹下放有对数据库进行操作的类
service------文件下放有对业务逻辑进行处理的类
config.py----项目配置文件
init_database.sql---数据库初始化文件
本来还想做一些实例类，但是发现需要频繁地进行封装和解封。get和set方法显得比较臃肿，就用字典代替了
## 工作步骤
当项目启动时
1. 由db_utils.py文件中的函数按照init_database.sql文件初始化数据库。
若数据库存在则不操作，若不存在则新建。

当请求选手信息时 在service层
1. 查看缓存中是否有该选手的信息，有则返回选手信息。无则跳过此步，查看数据库中有无选手信息。
2. 查看数据库中是否该选手信息，
若有，则用当前时间减去updated_at字段得到一个时间差(diff)。
该时间差大于30(数据在数据库中存储超过了30秒)，则重新爬取。并将爬取得到的数据更新到数据库(删除该选手原有的，插入新爬取的)和缓存(设置时间为30s)。
该时间差小于30(数据在数据库中存储不超过30秒)，则返回数据，并将数据存入缓存，缓存存在时间设置为(30-时间差)

当发生外键冲突时
    当要存入user_rating中的数据对应的handle在user_info中不存在
1. 在service层调用获取用户信息函数batch_get_user_info()，数将用户信息存入user_info。
2. 再次调用dao.save_ratings()将用户比赛信息存入
## 在一条 SQL 中查询指定选手的信息及其所有 rating 记录。
可以用联表查询或者新建一个视图。
联表查询的语句
SELECT u.*, r.*
FROM user_info u
INNER JOIN user_rating r ON u.handle = r.handle;

